name: Template - Smoke Test

on:
  workflow_call:
    # inputs:
    #   ENVIRONMENT:
    #     type: string
    #     description: "Github environment (dev|tst|stg|prod)"
    #     required: true
#   pull_request:
#     paths:
#       - upload-server/**
#       - tests/smoke/playwright/**

defaults:
  run:
    working-directory: tests/smoke/playwright

jobs:
  e2e-test:
    name: Playwright Tests
    timeout-minutes: 60
    runs-on: ubuntu-latest
    # environment: ${{ inputs.ENVIRONMENT }}
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Setup Node
        uses: actions/setup-node@v3
      - name: Install dependencies
        run: npm ci
      - name: Install playwright browsers
        run: npx playwright install --with-deps
      - name: Run tests
        env:
          CI: true
        run: npx playwright test
